import{a as f,B as v}from"./Button-T3Iyg7Gm.js";import{c as P,a as C,F as b,E as w,b as E}from"./index.esm-Bbkdc5GM.js";import{f as n}from"./currency-D6w2HscO.js";import{r as i,o as I,a as d,c as r,b as t,d as c,w as p,u as e,F as q,e as k,t as a,f as u,g as T}from"./index-B9bgAer8.js";const L={class:"py-12"},M={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Q={class:"bg-white overflow-hidden shadow rounded-lg"},R=t("div",{class:"px-4 py-5 sm:px-6"},[t("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Nova compra"),t("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"},"Registre uma nova compra.")],-1),$={class:"border-t border-gray-200"},j={class:"px-4 py-5 sm:p-6"},z={class:"grid grid-cols-6 gap-6"},D={class:"col-span-6 sm:col-span-3"},H=t("label",{for:"product",class:"block text-sm font-medium text-gray-700"},"Produto",-1),G=t("option",{value:""},"Selecione um tipo",-1),J=["value"],K={class:"col-span-6 sm:col-span-3"},O=t("label",{for:"quantity",class:"block text-sm font-medium text-gray-700"},"Quantidade",-1),U={class:"flex justify-between px-4 py-4 items-center bg-gray-50 border-t"},W={class:"flex"},X={class:"px-2"},Y={class:"leading-6 text-gray-900"},Z=t("span",{class:"font-bold"},"Valor total:",-1),tt=t("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"},"Valor total da compra.",-1),st={class:"px-2"},et={class:"leading-6 text-gray-900"},ot=t("span",{class:"font-bold"},"Total impostos:",-1),at=t("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"},"Valor total da importação.",-1),ct={class:"mt-3"},dt={class:"bg-white overflow-hidden shadow rounded-lg"},rt=t("div",{class:"px-4 py-5 sm:px-6"},[t("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Itens da compra"),t("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"},"Lista de itens da compra.")],-1),lt={class:""},nt={class:"w-full border-collapse bg-white text-left text-sm text-gray-500"},it=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"px-6 py-4 font-medium text-gray-900"},"Produto"),t("th",{scope:"col",class:"px-6 py-4 font-medium text-gray-900"},"Quantidade"),t("th",{scope:"col",class:"px-6 py-4 font-medium text-gray-900"},"Valor unitário"),t("th",{scope:"col",class:"px-6 py-4 font-medium text-gray-900"},"Valor imposto"),t("th",{scope:"col",class:"px-6 py-4 font-medium text-gray-900"},"Valor total")])],-1),pt={class:"divide-y divide-gray-100 border-t border-gray-100"},ut={class:"px-6 py-4"},mt={class:"px-6 py-4"},_t={class:"px-6 py-4"},xt={class:"px-6 py-4"},ht={class:"px-6 py-4"},yt={key:1},gt=t("td",{class:"px-6 py-4 text-center",colspan:"5"},"Ainda não há itens na compra",-1),ft=[gt],Vt={__name:"Home",setup(vt){const V=T(),m=i([]),l=i([]),_=i(0),x=i(0),F=async()=>{const{data:o}=await f.get("products/all");m.value=o},B=P({quantity:C().required("A quantidade é obrigatória").min(1,"A quantidade deve ser maior que 0")}),S=async(o,{resetForm:y})=>{try{const s=m.value.find(N=>N.id===o.product),h=s.price*o.quantity,g=h*(s.tax_percent/100);_.value+=h,x.value+=g,l.value.push({product:s.name,productId:s.id,quantity:o.quantity,price:s.price,taxes:g,total:h}),y()}catch(s){console.error(s)}},A=async()=>{try{await f.post("sales",{items:l.value}),l.value=[],_.value=0,x.value=0,V.push("/sales")}catch(o){console.error(o)}};return I(()=>{F()}),(o,y)=>(d(),r("div",L,[t("div",M,[t("div",Q,[R,t("div",$,[c(e(E),{onSubmit:S,"validation-schema":e(B)},{default:p(()=>[t("div",j,[t("div",z,[t("div",D,[H,c(e(b),{name:"product",as:"select",class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},{default:p(()=>[G,(d(!0),r(q,null,k(m.value,s=>(d(),r("option",{key:s.id,value:s.id},a(s.name),9,J))),128))]),_:1}),c(e(w),{name:"product",class:"text-red-500 text-sm"})]),t("div",K,[O,c(e(b),{name:"quantity",type:"number",class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"}),c(e(w),{name:"quantity",class:"text-red-500 text-sm"})])])]),t("div",U,[t("div",W,[t("div",X,[t("h3",Y,[Z,u(" "+a(e(n)(_.value)),1)]),tt]),t("div",st,[t("h3",et,[ot,u(" "+a(e(n)(x.value)),1)]),at])]),t("div",null,[c(v,{type:"submit",class:"bg-gray-50 mr-2"},{default:p(()=>[u("Adicionar item")]),_:1}),c(v,{type:"button",onClick:A,class:"bg-gray-50"},{default:p(()=>[u("Finalizar compra")]),_:1})])])]),_:1},8,["validation-schema"])])]),t("div",ct,[t("div",dt,[rt,t("div",lt,[t("table",nt,[it,t("tbody",pt,[l.value.length?(d(!0),r(q,{key:0},k(l.value,s=>(d(),r("tr",{key:s.product},[t("td",ut,a(s.product),1),t("td",mt,a(s.quantity),1),t("td",_t,a(e(n)(s.price)),1),t("td",xt,a(e(n)(s.taxes)),1),t("td",ht,a(e(n)(s.total)),1)]))),128)):(d(),r("tr",yt,ft))])])])])])])]))}};export{Vt as default};
